<!doctype html>
<html>
  <head>
    <style>
      body { margin: 0 auto; width: 900px;  }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="900" height="900"></canvas>
    <script>
      function MetatronsCube(canvas) {
        this.canvas = canvas;
        this.midpoint = { x: canvas.width/2, y: canvas.height/2 };
        this.size = 80;
        this.circles = [
          new Circle(this.midpoint.x, this.midpoint.y, this.size), // Center.
        ].concat(this.makeRings(2)).concat(this.makeRings(4));
      }

      MetatronsCube.prototype.draw = function() {
        var cube=this, ctx=cube.canvas.getContext('2d'), did={};
        ctx.beginPath();
        cube.circles.forEach(function (c1, i) {
          c1.draw(ctx); // Draw the circles.
          cube.circles.forEach(function (c2, j) {
            var them = (i<j) ? String(i)+j : String(j)+i;
            if ((i === j) || did[them]) { return; }
            c1.connectTo(c2, ctx); // Connect the centers.
            did[them] = true;
          })
        })
        ctx.stroke();
      };

      MetatronsCube.prototype.makeRings = function(layer) {
        var rqs = [[1,-1],[1,-1],[1,1],[1,1],[-1,1],[-1,-1]];
        return rqs.map(function (rq, i) {
          var p = (i%3==0) ? 0 : 1/3;
          return new Circle(
            this.midpoint.x + rq[0] * (layer * Math.sin(Math.PI * p) * this.size),
            this.midpoint.y + rq[1] * (layer * Math.cos(Math.PI * p) * this.size),
            this.size
          );
        }.bind(this));
      }

      function Circle(x, y, r) {
        this.x = x;
        this.y = y;
        this.r = r;
      }

      Circle.prototype.draw = function(ctx) {
        ctx.moveTo(this.x + this.r, this.y);
        ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, true);
      };

      Circle.prototype.connectTo = function(that, ctx) {
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(that.x, that.y);
      };

      // Draw Metatron's cube on the canvas.
      var canvas = document.getElementById('canvas');
      new MetatronsCube(canvas).draw();
    </script>
  </body>
</html>
